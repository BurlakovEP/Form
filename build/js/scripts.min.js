"use strict";window.onload=function(){function l(e,a,t){var i=document.createElement("span");i.innerHTML=a,i.className="form__message form__message_".concat(t),e.parentElement.insertBefore(i,e)}function r(a){e.querySelectorAll(".form__message").forEach(function(e){"all"===a?e.remove():a.previousElementSibling===e&&a.previousElementSibling.remove()})}function o(e,a,t){e.classList.remove("form__field_".concat(a)),e.classList.add("form__field_".concat(t))}var e=document.querySelector(".form"),t=e.querySelectorAll(".form__field"),c=/^[a-zA-Z]{1,20}$/,f=/^[-\w.]+@([A-z0-9][-A-z0-9]+\.)+[A-z]{2,4}$/,s=/^[\+]\d{1}\s[\(]\d{3}[\)]\s\d{3}[\-]\d{2}[\-]\d{2}$/;t.forEach(function(n){n.onblur=function(e){var a=e.target,t=a.value,i=a.id;if(""===t&&"form__field"===n.className)return!1;"firstname"===i&&t.match(c)||"lastname"===i&&t.match(c)||"country"===i&&t.match(c)?(o(n,"invalid","valid"),r(n)):"email"===i&&t.match(f)?(o(n,"invalid","valid"),r(n)):"phone"===i&&t.match(s)?(o(n,"invalid","valid"),r(n)):(o(n,"valid","invalid"),r(n),l(n,n.getAttribute("data-format"),"failure"))}});e.addEventListener("submit",function(e){e.preventDefault();var a=!0;r("all"),t.forEach(function(e){e.classList.contains("form__field_valid")||(a=!1,o(e,"valid","invalid"),l(e,e.getAttribute("data-format"),"failure"))}),!0===a&&(l(t[0],"Данные успешно отправлены!","success"),t.forEach(function(e){e.value="",e.className="form__field"}))})};